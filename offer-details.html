<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Offer Details - MONETRA</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea, #764ba2);
            --secondary-gradient: linear-gradient(135deg, #f093fb, #f5576c);
            --dark-bg: #0a0e27;
            --card-bg: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--dark-bg); color: var(--text-primary); overflow-x: hidden; padding-top: 80px; padding-bottom: 90px; }
        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .app-container { padding: 0 15px; animation: fadeInUp 0.5s ease-out forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Header */
        .app-header { position: fixed; top: 0; left: 0; right: 0; display: flex; align-items: center; justify-content: space-between; padding: 15px 20px; background: rgba(10, 14, 39, 0.8); backdrop-filter: blur(10px); z-index: 10; }
        .profile-info { display: flex; align-items: center; gap: 12px; }
        .profile-pic { width: 45px; height: 45px; border-radius: 50%; border: 2px solid #fff; object-fit: cover; }
        .user-details h3 { font-size: 1.1rem; font-weight: 600; line-height: 1.2; }
        .user-details p { font-size: 0.8rem; color: var(--text-secondary); }
        .wallet-balance { display: flex; align-items: center; gap: 8px; background: var(--card-bg); padding: 8px 15px; border-radius: 20px; font-weight: 600; }
        .coin-icon { width: 20px; height: 20px; }
        #wallet-balance { font-weight: 700; color: #f093fb; font-size: 1.1rem; }

        /* Offer Details Content */
        .offer-banner-container {
            margin-top: 20px;
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }
        .offer-banner-container:hover { transform: translateY(-5px); }
        #offer-banner-img { width: 100%; display: block; }
        
        .details-card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }
        .details-card:hover { transform: translateY(-10px); }

        .details-card h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .details-card h4 { font-size: 1.1rem; margin-top: 20px; margin-bottom: 10px; color: #f093fb; }
        .details-card p, .details-card li {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        .details-card ul { padding-left: 20px; }

        .open-offer-btn {
            width: 100%;
            padding: 15px;
            margin-top: 30px;
            border: none;
            border-radius: 15px;
            background: var(--secondary-gradient);
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .open-offer-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(240, 147, 251, 0.3);
        }
    </style>
</head>
<body>
    <canvas id="particle-canvas"></canvas>

    <header class="app-header">
        <div class="profile-info">
            <img id="user-photo" src="profile.png" alt="Profile" class="profile-pic">
            <div class="user-details">
                <h3 id="user-name">Loading...</h3>
                <p id="user-email">Please wait</p>
            </div>
        </div>
        <div class="wallet-balance">
            <img src="coin-icon.png" class="coin-icon" alt="coin">
            <span id="wallet-balance">0</span>
        </div>
    </header>

    <main class="app-container">
        <div class="offer-banner-container">
            <img id="offer-banner-img" src="" alt="Offer Banner">
        </div>

        <div class="details-card">
            <h2 id="offer-title">Loading Offer...</h2>
            <h4>How to Complete:</h4>
            <ul id="offer-instructions">
                <li>Loading steps...</li>
            </ul>
        </div>
        
        <button id="open-offer-btn" class="open-offer-btn">Open Offer</button>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";
        const firebaseConfig = { apiKey: "AIzaSyAqtfmxxvVhbRBX-05O1AhSGmgxK8O8ncE", authDomain: "monetra-66446.firebaseapp.com", projectId: "monetra-66446", storageBucket: "monetra-66446.appspot.com", messagingSenderId: "1081175709983", appId: "1:1081175709983:web:7baadd2aec2e7dfeb5382a" };
        const app = initializeApp(firebaseConfig); const auth = getAuth(app); const db = getFirestore(app);
        const canvas = document.getElementById('particle-canvas'); const ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let pA; class P{constructor(x,y,dX,dY,s,c){this.x=x;this.y=y;this.dX=dX;this.dY=dY;this.s=s;this.c=c}draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.s,0,Math.PI*2);ctx.fillStyle=this.c;ctx.fill()}update(){if(this.x>canvas.width||this.x<0)this.dX=-this.dX;if(this.y>canvas.height||this.y<0)this.dY=-this.dY;this.x+=this.dX;this.y+=this.dY;this.draw()}}
        function iP(){pA=[];let n=(canvas.height*canvas.width)/9e3;for(let i=0;i<n;i++){let s=Math.random()*2+1,x=Math.random()*(innerWidth-s*2-s*2)+s*2,y=Math.random()*(innerHeight-s*2-s*2)+s*2,dX=Math.random()*.4-.2,dY=Math.random()*.4-.2;pA.push(new P(x,y,dX,dY,s,'rgba(102,126,234,0.6)'))}}
        function aP(){requestAnimationFrame(aP);ctx.clearRect(0,0,innerWidth,innerHeight);pA.forEach(p=>p.update())}
        iP();aP();window.addEventListener('resize',()=>{canvas.width=innerWidth;canvas.height=innerHeight;iP()});
        onAuthStateChanged(auth,async u=>{if(u){document.getElementById('user-email').textContent=u.email;if(u.photoURL)document.getElementById('user-photo').src=u.photoURL;const dR=doc(db,"users",u.uid);const dS=await getDoc(dR);if(dS.exists()){const uD=dS.data();document.getElementById('user-name').textContent=uD.name||'User';document.getElementById('wallet-balance').textContent=`₹ ${uD.walletBalance}`}else{document.getElementById('user-name').textContent='User';document.getElementById('wallet-balance').textContent='₹ 0'}}else{window.location.href='auth.html'}});
        
        // --- DYNAMIC OFFER LOADING LOGIC ---
        const offerData = {
            quckcauh: {
                title: "Quckcauh Survey",
                banner: "quckcauh-banner.png",
                instructions: [
                    "Click the 'Open Offer' button below.",
                    "Sign up on the website with your details.",
                    "Complete one full survey to be eligible for the reward.",
                    "Reward will be credited directly by the provider within 24 hours."
                ],
                finalLink: "https://example.com/quckcauh-offer-link" // Real link here
            },
            dreamshare: {
                title: "Dream Share App",
                banner: "dreamshare-banner.png",
                instructions: [
                    "Click to download the app from the Play Store.",
                    "Register a new account using your mobile number.",
                    "Complete the 'Refer & Earn' task inside the app.",
                    "Payment is handled directly inside the Dream Share app."
                ],
                finalLink: "https://example.com/dreamshare-offer-link" // Real link here
            }
        };

        const urlParams = new URLSearchParams(window.location.search);
        const offerId = urlParams.get('offer');
        const currentOffer = offerData[offerId];

        if (currentOffer) {
            document.getElementById('offer-banner-img').src = currentOffer.banner;
            document.getElementById('offer-title').textContent = currentOffer.title;
            const instructionsList = document.getElementById('offer-instructions');
            instructionsList.innerHTML = ''; // Clear loading text
            currentOffer.instructions.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                instructionsList.appendChild(li);
            });
            document.getElementById('open-offer-btn').onclick = () => {
                window.open(currentOffer.finalLink, '_blank');
            };
        } else {
            document.getElementById('offer-title').textContent = "Offer not found";
        }

    </script>
</body>
</html>